## Solana MPC CLI: A Proof-of-Concept for Threshold Signature Scheme Wallets

- The Solana MPC CLI is an open-source proof-of-concept tool built in Rust that demonstrates the implementation of a multi-party computation (MPC) wallet on the Solana blockchain using threshold signature schemes (TSS). It leverages the MuSig2 protocol from the multi-party-eddsa library to enable multiple parties to collaboratively generate and manage a shared Solana address without any single party holding the full private key. This approach enhances security by distributing trust among participants, making it ideal for scenarios like multi-signature wallets or decentralized custody solutions. The tool allows users to generate key shares, aggregate them into a shared public key, and perform secure transactions through a step-by-step MPC signing process, all while interacting with Solana's testnet, devnet, mainnet, or a local validator.
- The core features of the Solana MPC CLI include key generation for individual parties, balance checking for any address, requesting airdrops from faucets on non-mainnet networks, and sending SOL using a single private key for simple transactions. For MPC-specific operations, it supports aggregating public keys from multiple parties into a single shared address, initiating the signing process with nonce generation in step one, computing partial signatures in step two based on received nonces and transaction details, and finally aggregating partial signatures to broadcast a complete transaction in the final step. Additional utilities like fetching recent block hashes ensure transactions are valid and up-to-date. The tool is designed with a command-line interface using Clap for easy parsing, making it accessible for developers experimenting with TSS on Solana.
- The MPC signing process works in a distributed manner to ensure no single party can control the wallet alone. First, each party generates their key share using the generate command, producing a secret share (kept private) and a public share (shared with others). These public shares are aggregated using aggregate-keys to create the shared wallet address. To sign a transaction, parties start with agg-send-step-one --keypair `<secret-share>` to generate nonces and a secret state. They exchange the nonces, then use agg-send-step-two with identical transaction parameters (amount, recipient, memo, block hash) and the received nonces to produce partial signatures. Finally, one party collects these partial signatures and uses aggregate-signatures-and-broadcast to combine them into a valid Solana transaction signature, which is then sent to the network. This threshold scheme requires all parties (or a configured threshold) to participate, preventing unauthorized spends.
- Upcoming features for the Solana MPC CLI aim to expand its capabilities beyond basic SOL transfers. Planned enhancements include support for token transfers, such as USDT, USDC, and other SPL tokens, by integrating instructions for the Associated Token Account program and Token program. This would allow the MPC wallet to handle minting, burning, and transferring custom tokens securely through the same distributed signing process. Additionally, future updates may introduce configurable thresholds (e.g., 2-of-3 signing), integration with Solana programs for on-chain verification of TSS signatures, and improved error handling for network failures. Other potential additions could involve voice mode for step-by-step guidance in mobile apps or API endpoints for programmatic access, making the tool more versatile for production use in decentralized finance applications.
- To install and use the Solana MPC CLI, clone the repository and build it with Cargo: cargo build --release. Ensure you have Rust installed (version 1.87.0 or later). Run commands like sol_mpc --help for usage details. For testing, start a local Solana validator with solana-test-validator in a separate terminal. Always use testnet or devnet for experiments, as mainnet involves real funds.

**Contributions are welcome to improve the tool's robustness and add new features!**

Feel free to submit issues, feature requests, or pull requests to help enhance this project.
